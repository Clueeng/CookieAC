package fr.clue.cookieac.check.impl.exploit;

import com.github.retrooper.packetevents.event.PacketReceiveEvent;
import fr.clue.cookieac.check.Check;
import fr.clue.cookieac.check.CheckData;
import fr.clue.cookieac.utils.PacketUtil;

@CheckData(name = "Exploit", punishmentVL = 1500.0, type = "A", description = "Invalid Pitch", experimental = true, setback = true)
public class InvalidPitch extends Check {

    @Override
    public void onPacket(PacketReceiveEvent event){

        switch (PacketUtil.toPacketReceive(event)) {
            case CLIENT_LOOK:
            case CLIENT_POSITION:
            case CLIENT_POSITION_LOOK:
            case CLIENT_FLYING: {
                float pitch = getUser().toBukkit().getPitch();

                float[] pitchRange = new float[]{-90, 90};
                if(pitch <= pitchRange[0] || pitch >= pitchRange[1]){
                    fail(event, this.description + ". Player pitch : " + pitch);
                }
            }
        }
    }

}
